<!DOCTYPE html>
<html>
<head>
  <title>NPM A.I</title>
  <link rel="stylesheet" href="NPMaistyle.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <header class="header">NPM A.I.
    
  </header>
  <h2>NPM A.I ask anything</h2>
  <p>AI:<p id="response"></p></p>
 <div class="stickdiv">
  
  <input type="text,file" id="userInput" placeholder="Type your question here..." />
  <button onclick="askAI()">Send</button>
  <button onclick="startListening()">üé§ Speak</button>
  </div> 
  
  
  
 
  <script>
     // Voice input setup
  function startListening() {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "en-IN"; // Ya "hi-IN" for Hindi
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    recognition.onstart = () => {
      document.getElementById("userInput").placeholder = "üéôÔ∏è Listening...";
    };

    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      document.getElementById("userInput").value = transcript;
      document.getElementById("userInput").placeholder = "Type your question here...";
    };

    recognition.onerror = (event) => {
      alert("üé§ Voice error: " + event.error);
      document.getElementById("userInput").placeholder = "Type your question here...";
    };

    recognition.start();
  }
// api model first :- google/gemma-3-4b-it:free
    
    const apiConfigs = [
       { key: "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", model: "google/gemma-3-4b-it:free" },
      { key:"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", model:"deepseek/deepseek-r1:free"},
      { key: "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", model:"undi95/toppy-m-7b"},
      { key: "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", model: "mistralai/mistral-7b-instruct"},
      { key: "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", model: "mistralai/mixtral-8x7b-instruct" },
      { key: "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", model: "openchat/openchat-3.5" },
     { key: "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", model: "gryphe/mythomist-7b" },
      { key: "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", model: "undi95/toppy-m-7b" },
     
            { key: "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", model: "deepseek/v3:free" },
            { key: "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", model: "xai/cypher-alpha:free" }
    ];

    async function askAI() {
    
      const input = document.getElementById("userInput").value.trim();
      const responseBox = document.getElementById("response");

      if (!input) {
        responseBox.textContent = "‚ùó Please type something!";
        return;
      }

      responseBox.textContent = "üß† Thinking...";

      for (let i = 0; i < apiConfigs.length; i++) {
        const { key, model } = apiConfigs[i];
        try {
          const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
            method: "POST",
            headers: {
              "Authorization": "Bearer " + key,
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              model: model,
              messages: [{ role: "user", content: input }]
            })
          });

          const data = await res.json();
          console.log(`üîÅ API ${i + 1} response:`, data);

          if (data?.choices?.length > 0) {
            responseBox.textContent = data.choices[0].message.content;
            return; // ‚úÖ Done
          } else if (data?.error) {
            responseBox.textContent = `‚ùå Error (${i + 1}): ${data.error.message}`;
          } else {
            responseBox.textContent = `‚ö†Ô∏è Unexpected response from API ${i + 1}`;
          }

        } catch (err) {
          console.warn(`‚õî Failed with API ${i + 1}`, err);
        }
      }

      responseBox.textContent = "‚ùå All API keys failed. Try again later.";
      
    }
  </script>
</body>
</html>
